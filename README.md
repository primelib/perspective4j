# *Perspective4J*

[![Maven Central](https://img.shields.io/maven-central/v/io.github.primelib/perspective4j)](https://central.sonatype.com/artifact/io.github.primelib/perspective4j)
[![javadoc](https://javadoc.io/badge2/io.github.primelib/perspective4j/javadoc.svg)](https://javadoc.io/doc/io.github.primelib/perspective4j)

> A java library for the [PerspectiveAPI](https://www.perspectiveapi.com/).

## Installation

```gradle
implementation("io.github.primelib:perspective4j:<latestVersion>")
```

[Click to view instructions for other build tools](https://central.sonatype.com/artifact/io.github.primelib/perspective4j).

## Usage

*Consumer Specification Approach*

```java
PerspectiveSpecApi client = PerspectiveFactory.create(spec -> {
    spec.api(PerspectiveSpecApi.class);
    spec.apiKeyAuth(auth -> {
        auth.apiKey("<apiKey>");
    });
});

CommentAnalyzeResult result = client.analyzeCommentV1Alpha1(spec -> {
    spec.text("<text>");
    spec.languages(Collections.singleton("en"));
    spec.requestedAttributes(Collections.singleton(AttributeType.TOXICITY));
});
```

*Parameter Approach*

```java
PerspectiveApi client = PerspectiveFactory.create(spec -> {
    spec.api(PerspectiveApi.class);
    spec.apiKeyAuth(auth -> {
        auth.apiKey("<apiKey>");
    });
});

CommentAnalyzeResult result = client.analyzeCommentV1Alpha1(new CommentAnalyzeRequest(new Comment("<text>"), Collections.singletonMap(AttributeType.TOXICITY, null), null));
```

**_NOTE:_** The  `Parameter Approach` can break if the API changes. The `Consumer Specification Approach` is more resilient to API changes.

## Contribution

### Generate

The `codegen.sh` script is used to:

- `codegen.sh update`: download and preprocess the openapi spec to resolve external issues if any.
- `codegen.sh generate`: generate the source code from the openapi spec.

### Template

All source code except for files listed in `.openapi-generator-ignore` is generated by our custom [OpenAPI Generator](https://github.com/primelib/primecodegen).
If you see any issues with the generated code related to the template, please open an issue in https://github.com/primelib/primecodegen.

## License

Released under the [MIT License](./LICENSE).
